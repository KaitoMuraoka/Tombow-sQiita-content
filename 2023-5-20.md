<!--
title:   変数のリファクタリング手法まとめ
tags:    リファクタリング,Swift
private: false
-->

# 記事の背景
リファクタリングの勉強をしているので、その手法、特に変数のリファクタリングについてまとめました。

サンプルコードはSwiftです。これは個人的にSwiftが好きだからです。
少しとっつきにくい言語ではありますが、最近はChatGPTもありますし、お好きな言語・得意な言語に変換して読んでいただけたらなと思います。

また、内容は場合によって変更・追加されることがあります。その他しは編集リクエストなどを見ていただけますと変更点がわかると思います。


# 本論
## 変数の抽出

複雑で読みにくい処理は、ローカル変数を駆使し、処理を細分化することで管理が容易になる。
変数または定数はデバッガやprint文を仕掛ける際にも、その内容把握に威力を発揮する。
処理に名前を付与したいとき、即ち**変数を抽出**を検討するタイミングである。
その名前が関数内でのみ有意義なものであれば、**変数の抽出**は賢明な選択である。

### 手順
1. 抽出しようとする式に副作用がないことを確認する
2. 変更不可な変数を定義する。名付けたい式の値をその変数に設定する
3. 元の式を新しい変数で置き換える
4. テストする

式が2回以上現れる場合、それぞれの変数で置き換えて、置き換えるたびにテストする。

また、はじめに定数で宣言し、変更する箇所や再代入する箇所が現れたら、変数に変更していくのがポイントである。(ビルドするときにエラーが出るので、わかりやすい)


<!--
title: 【Swift】JSONEncoderでnilをNullとしてエンコードする
tags:  Swift,JSON
private: true
-->

# 記事の背景
先日、APIにリクエストを投げる際、`Int?`型にnilを入れて投げたところ、うまく反映されないという問題にぶち当たった。

## 背景の詳細説明
上記の説明だと少しわかりづらいと思い、サンプルコードを使って説明する。

以下のようなJSONデータがあったとする。

```JSON:JSON
{
  "name" : "Ame",
  "age" : 18,
  "hobby" : "web制作"
}
```

この場合、Swiftの構造体からJSONデータに変換するためには対象の構造体が`Encodable`プロトコルまたは`Codable`プロトコルに準拠している必要がある。

そのため、以下のような構造体を作成する。

```swift:persion.swift
struct Person: Encodable {
    var name:String
    var age:Int?
    var hobby:String?
}
```

ここで、`age`と`hobby`はNullを許容するものとした。

これらを基に、SwiftでJSONデータにエンコードする。JSONデータをエンコードするには`JSONEncoder`を使用する必要がある。
